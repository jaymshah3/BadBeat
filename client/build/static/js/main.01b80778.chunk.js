(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,n){e.exports=n(147)},112:function(e,t,n){},113:function(e,t,n){},144:function(e,t){},147:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(8),s=n.n(o),i=n(52),u=n(16),l=(n(112),n(17)),c=n(18),m=n(20),h=n(19),d=n(66),f=n(11),v=(n(113),n(184)),p=n(179);function b(e){return isNaN(e)||""==e||parseInt(e)<0}function k(e){return""==e}var g=function(e){return{socket:e.socket}},C=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleUsernameChange=function(e){a.setState({username:e.target.value,usernameError:k(e.target.value)})},a.handleBankChange=function(e){a.setState({bank:e.target.value,bankError:b(e.target.value)})},a.handleSmallBlindChange=function(e){a.setState({smallBlind:e.target.value,smallBlindError:b(e.target.value)})},a.handleBigBlindChange=function(e){a.setState({bigBlind:e.target.value,bigBlindError:b(e.target.value)})},a.state={username:"",bank:"",smallBlind:"",bigBlind:"",usernameError:!0,bankError:!0,smallBlindError:!0,bigBlindError:!0,owner:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.socket.on("owner",(function(t){e.setState({owner:t.room})}))}},{key:"isError",value:function(){var e=this.state,t=e.usernameError,n=e.bankError,a=e.smallBlindError,r=e.bigBlindError;return t||n||a||r}},{key:"render",value:function(){var e=this,t=this.state,n=t.username,a=t.bank,o=t.smallBlind,s=t.bigBlind,i=t.owner;return i?r.a.createElement(f.a,{to:{pathname:"/"+i,state:{isOwner:!0,username:n,bank:a}}}):r.a.createElement("div",null,r.a.createElement(v.a,{value:n,onChange:this.handleUsernameChange,id:"outlined-basic",label:"Username",variant:"outlined"}),r.a.createElement(v.a,{value:a,onChange:this.handleBankChange,id:"outlined-basic",label:"Bank",variant:"outlined"}),r.a.createElement(v.a,{value:o,onChange:this.handleSmallBlindChange,id:"outlined-basic",label:"Small Blind",variant:"outlined"}),r.a.createElement(v.a,{value:s,onChange:this.handleBigBlindChange,id:"outlined-basic",label:"Big Blind",variant:"outlined"}),r.a.createElement(p.a,{variant:"contained",type:"submit",disabled:this.isError(),onClick:function(){return e.createGame()}},"Create Game"))}},{key:"createGame",value:function(){var e=this.state,t=e.username,n=e.bank,a=e.smallBlind,r=e.bigBlind;this.props.socket.emit("create room",{username:t,bank:parseInt(n),small_blind:parseInt(a),big_blind:parseInt(r)})}}]),n}(a.Component),E=Object(u.b)(g)(C),y=n(178),S=n(181),j=n(182),w=n(183),B=n(186),O=n(180),A=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={username:"",bank:""},a}return Object(c.a)(n,[{key:"handleUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"handleBankChange",value:function(e){this.setState({bank:e.target.value})}},{key:"handleClose",value:function(){(0,this.props.onClose)(!1)}},{key:"join",value:function(){var e=this.props,t=e.socket,n=e.room,a=e.onClose,r=this.state,o=r.bank,s=r.username;t.emit("request to join",{username:s,room:n,bank:parseInt(o)}),a(!0,s,o)}},{key:"isDisabled",value:function(){var e=this.state,t=e.bank,n=e.username;return b(t)||k(n)}},{key:"render",value:function(){var e=this,t=this.state,n=t.username,a=t.bank,o=t.usernameError,s=this.props.open;return r.a.createElement(B.a,{onClose:function(){return e.handleClose()},open:s},r.a.createElement(O.a,null,"Join Game"),r.a.createElement(v.a,{label:"Username",value:n,onChange:function(t){return e.handleUsernameChange(t)},helperText:o?"Username already exists. ":"",error:o}),r.a.createElement(v.a,{label:"Bank",value:a,onChange:function(t){return e.handleBankChange(t)}}),r.a.createElement(p.a,{onClick:function(){return e.join()},disabled:this.isDisabled()},"Join"))}}]),n}(a.Component),R=Object(u.b)(g)(A),q=n(187),M=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),a=t.call(this,e),console.log(e),a.state={amount:e.minBet},a}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(e){e.minBet!=this.props.minBet&&this.setState({amount:this.props.minBet})}},{key:"handleAmountChange",value:function(e,t){this.setState({amount:t})}},{key:"handleAmountTextChange",value:function(e){this.setState({amount:e.target.value})}},{key:"raise",value:function(){var e=this.props,t=e.socket,n=e.onClose,a=e.username,r=e.room,o=this.state.amount;t.emit("raise",{username:a,amount:parseInt(o),room:r}),n(!0)}},{key:"handleClose",value:function(){(0,this.props.onClose)(!1)}},{key:"isInvalidAmount",value:function(){var e=this.state.amount,t=this.props,n=t.minBet,a=t.maxBet;return e<n||e>a}},{key:"render",value:function(){var e=this,t=this.props,n=t.bank,a=t.open,o=t.currentContribution,s=t.minBet,i=t.maxBet,u=this.state.amount;return r.a.createElement(B.a,{onClose:function(){return e.handleClose()},open:a},r.a.createElement(O.a,null,"How much do you want to raise to?"),r.a.createElement("p",null,"Your bank is ",n,". You've already contributed ",o,". "),r.a.createElement(q.a,{value:u,max:Math.min(i,n),min:s,onChange:function(t,n){return e.handleAmountChange(t,n)},step:1}),r.a.createElement(v.a,{label:"Amount",value:u,onChange:function(t){return e.handleAmountTextChange(t)},error:this.isInvalidAmount()}),r.a.createElement(p.a,{onClick:function(){return e.raise()},disabled:isNaN(u)||""==u},"Done"))}}]),n}(a.Component),P=Object(u.b)(g)(M),D=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(l.a)(this,n),a=t.call(this,e);var r=e.players.map((function(e){return{username:e.username,bank:e.bank,latestAction:"",currentContribution:0}})),o=[],s=0,i=0;return e.currState&&(o=e.currState.communityCards,s=e.currState.pot,i=e.currState.highestCurrentContribution),console.log("beginning: "+JSON.stringify(r)),a.state={personalCards:[],communityCards:o,options:[],highestCurrentContribution:i,currentPlayers:r,pot:s,showRaiseDialog:!1,winnings:0,winners:[],maxBet:0,minBet:0},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.defineHandlers()}},{key:"resetState",value:function(){this.setState({personalCards:[],communityCards:[],options:[],highestCurrentContribution:0,pot:0,showRaiseDialog:!1,currentHand:null,winners:[],winnings:0})}},{key:"defineHandlers",value:function(){var e=this,t=this.props,n=t.socket,a=t.username;n.on("dealt cards",(function(t){e.setState({personalCards:t.cards,result:"",winnings:0})})),n.on("options for player",(function(t){e.setState({options:t.options,highestCurrentContribution:t.highest_contribution,maxBet:t.max_bet,minBet:t.min_bet})})),n.on("highest contribution",(function(t){e.setState({highestCurrentContribution:t.highest_contribution})})),n.on("player action",(function(t){e.setState((function(e){for(var n=[],a=e.currentPlayers,r=0;r<a.length;r++){var o={};a[r].username==t.username?(o.username=a[r].username,o.latestAction=t.action,o.currentContribution=t.currentContribution,o.bank=a[r].bank):o=a[r],n.push(o)}return{currentPlayers:n}}))})),n.on("withdraw",(function(t){e.setState((function(e){for(var n=[],a=e.currentPlayers,r=0;r<a.length;r++){var o={};a[r].username==t.username?(o.username=a[r].username,o.latestAction=a[r].action,o.currentContribution=a[r].currentContribution,o.bank=a[r].bank-t.amount):o=a[r],n.push(o)}return console.log(n),{currentPlayers:n}}))})),n.on("pot update",(function(t){e.setState({pot:t.pot})})),n.on("community cards",(function(t){e.setState({communityCards:t.community_cards})})),n.on("reset current contribution",(function(t){e.setState((function(e){for(var t=[],n=e.currentPlayers,a=0;a<n.length;a++){var r={};r.username=n[a].username,r.latestAction="",r.currentContribution=0,r.bank=n[a].bank,t.push(r)}return{currentPlayers:t}}))})),n.on("current hand",(function(t){e.setState({currentHand:t})})),n.on("best hand",(function(t){e.setState({currentHand:t})})),n.on("result",(function(t){console.log(t),e.setState((function(e){for(var n=[],r=[],o=0,s=e.currentPlayers,i=0;i<s.length;i++){var u={},l=t[s[i].username];console.log("resultObj"),console.log(l),u.username=s[i].username,u.latestAction=s[i].action,u.currentContribution=s[i].currentContribution,u.bank=l.final_bank,a==s[i].username&&(o=l.winnings),l.winnings>0&&r.push(l),console.log("newObj"),console.log(u),n.push(u)}return console.log("newList"),console.log(n),{currentPlayers:n,winners:r,winnings:o}}),(function(){console.log(e.state)}))})),n.on("new game",(function(){e.resetState()}))}},{key:"getMyCurrentContribution",value:function(){for(var e=this.state.currentPlayers,t=this.props.username,n=0;n<e.length;n++)if(e[n].username==t)return e[n].currentContribution}},{key:"getMyCurrentBank",value:function(){for(var e=this.state.currentPlayers,t=this.props.username,n=0;n<e.length;n++)if(e[n].username==t)return e[n].bank}},{key:"showWinOrLoss",value:function(){var e=this.state.winners;return 0==e.length?null:r.a.createElement(y.a,null,e.map((function(e){return r.a.createElement(S.a,{key:e.username},r.a.createElement("p",null,e.username+" "+e.winnings+" "+e.hand[0].value+" of "+e.hand[0].suit+", "+e.hand[1].value+" of "+e.hand[1].suit))})))}},{key:"showCurrentHand",value:function(){var e=this.state.currentHand;if(null==e)return null;for(var t="",n=0;n<e.cards.length;n++)t+=e.cards[n].value+" of "+e.cards[n].suit,t+=", ";return r.a.createElement("h3",null,"Your best hand is ",e.major_group," with cards ",t)}},{key:"showButtonForAction",value:function(e){var t=this,n=this.state.highestCurrentContribution;return"fold"==e?r.a.createElement(p.a,{onClick:function(){return t.doAction("fold")}},"Fold"):"raise"==e?r.a.createElement(p.a,{onClick:function(){return t.doAction("raise")}},"Raise"):"call"==e?r.a.createElement(p.a,{onClick:function(){return t.doAction("call")}},"Call for ",n-this.getMyCurrentContribution()):"check"==e?r.a.createElement(p.a,{onClick:function(){return t.doAction("check")}},"Check"):"bet"==e?r.a.createElement(p.a,{onClick:function(){return t.doAction("raise")}},"Bet"):void 0}},{key:"doAction",value:function(e){"fold"==e?this.fold():"call"==e||"check"==e?this.call():this.setState({showRaiseDialog:!0})}},{key:"handleClose",value:function(e){this.setState({showRaiseDialog:!1}),e&&this.setState({options:[]})}},{key:"fold",value:function(){var e=this.props,t=e.socket,n=e.username,a=e.room;t.emit("fold",{username:n,room:a}),this.setState({options:[]})}},{key:"call",value:function(){var e=this.props,t=e.socket,n=e.username,a=e.room,r=this.state.highestCurrentContribution,o=this.getMyCurrentContribution();console.log(n),t.emit("call",{username:n,amount:r-o,room:a}),this.setState({options:[]})}},{key:"render",value:function(){var e=this,t=this.state,n=t.currentPlayers,a=t.options,o=t.highestCurrentContribution,s=t.showRaiseDialog,i=t.personalCards,u=t.communityCards,l=t.pot,c=t.minBet,m=t.maxBet,h=this.props,d=h.username,f=h.socket,v=h.room,p=this.getMyCurrentBank(),b=this.getMyCurrentContribution();return r.a.createElement("div",null,r.a.createElement(y.a,null,n.map((function(e){return r.a.createElement(S.a,{key:e.username},r.a.createElement("div",null,r.a.createElement(j.a,null,e.username),r.a.createElement(j.a,null,e.bank)))}))),r.a.createElement(w.a,null),this.showWinOrLoss(),r.a.createElement("h3",null,"Your cards"),r.a.createElement(y.a,null,i.map((function(e){return r.a.createElement(S.a,{key:e.value+e.suit},r.a.createElement(j.a,null,e.value," of ",e.suit))}))),r.a.createElement(w.a,null),r.a.createElement("h3",null,"Community cards"),r.a.createElement(y.a,null,u.map((function(e){return r.a.createElement(S.a,{key:e.value+e.suit},r.a.createElement(j.a,null,e.value," of ",e.suit))}))),r.a.createElement(w.a,null),r.a.createElement(y.a,null,a.map((function(t){return r.a.createElement(S.a,{key:t},e.showButtonForAction(t))}))),r.a.createElement(w.a,null),r.a.createElement(P,{username:d,bank:p,room:v,socket:f,open:s,onClose:function(t){return e.handleClose(t)},currentContribution:b,minBet:c,maxBet:m}),this.showCurrentHand(),r.a.createElement("h3",null,"Pot: ",l),r.a.createElement("h3",null,"Your Current Contribution: ",b),r.a.createElement("h3",null,"Highest Contribution: ",o))}}]),n}(a.Component),_=Object(u.b)(g)(D),G=n(173),J=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).MAX_MESSAGES=500,a.state={messages:[],message:""},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.defineHandlers()}},{key:"defineHandlers",value:function(){var e=this;this.props.socket.on("chat message",(function(t){e.setState((function(n){var a=n.messages.concat(t);return a.length>e.MAX_MESSAGES&&(a=a.slice(a.length()-e.MAX_MESSAGES)),{messages:a}}))}))}},{key:"renderMessage",value:function(e){return r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,e.username+": "),e.message))}},{key:"handleMessageChange",value:function(e){this.setState({message:e.target.value})}},{key:"onFormSubmit",value:function(e){e.preventDefault();var t=this.state.message,n=this.props,a=n.socket,r=n.username,o=n.room;""!=t&&(a.emit("chat message",{room:o,message:t,username:r}),this.setState({message:""}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.messages,a=t.message;return r.a.createElement("div",null,r.a.createElement("ul",null,n.map((function(t,n){return e.renderMessage(t,n)}))),r.a.createElement("form",{onSubmit:function(t){return e.onFormSubmit(t)}},r.a.createElement(G.a,{label:"Chat",value:a,onChange:function(t){return e.handleMessageChange(t)}})))}}]),n}(a.Component),H=Object(u.b)(g)(J),x=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this,e)).handleRequest=function(e,t){var n=a.props.socket,r=a.props.match.params.id,o={username:e.username,bank:e.bank,request_sid:e.request_sid,approve:t,room:r};a.setState((function(e){return{joinRequests:e.joinRequests.filter((function(e){return e.username!=o.username}))}})),n.emit("handle join request",o)},a.handleClose=function(e){a.setState({showJoinDialog:!1,isRequested:e})};var r=!1,o=!1,s="",i=0;return a.props.location&&a.props.location.state&&a.props.location.state.isOwner&&(r=!0,o=!0,s=a.props.location.state.username,i=a.props.location.state.bank),a.state={isOwner:r,isJoined:o,isRequested:!1,showJoinDialog:!1,initialLoad:!1,joinedPlayers:[],joinRequests:[],startGame:!1,username:s,bank:i,usernameError:!1,currState:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.defineHandlers(),this.loadUsers()}},{key:"defineHandlers",value:function(){var e=this,t=this.props.socket;t.on("join request",(function(t){e.setState((function(e){return{joinRequests:e.joinRequests.concat(t)}}))})),t.on("user joined",(function(t){e.setState((function(e){return{joinedPlayers:e.joinedPlayers.concat(t)}}))})),t.on("game info",(function(t){var n=null;t.started&&(n={communityCards:t.community_cards,pot:t.pot,highestCurrentContribution:t.highest_current_contribution}),e.setState({joinedPlayers:t.players,startGame:t.started,currState:n})})),t.on("game start",(function(){e.setState({startGame:!0})})),t.on("duplicate username",(function(){e.setState({isRequested:!1,usernameError:!0})})),t.on("request response",(function(t){t.approve?e.setState({isRequested:!1,usernameError:!1,isJoined:!0,username:t.username,bank:t.bank}):e.setState({isRequested:!1})}))}},{key:"loadUsers",value:function(){var e=this.props.socket,t=this.props.match.params.id;e.emit("game info",{room:t})}},{key:"showStartButton",value:function(){var e=this,t=this.state,n=t.isOwner,a=t.joinedPlayers;return n&&a.length>=2?r.a.createElement(p.a,{variant:"contained",onClick:function(){return e.startGame()}},"Start Game"):null}},{key:"showJoinedPlayers",value:function(){var e=this.state.joinedPlayers;return r.a.createElement(y.a,null,e.map((function(e){return r.a.createElement(S.a,{key:e.username},r.a.createElement("div",null,r.a.createElement(j.a,null,e.username),r.a.createElement(j.a,null,e.bank)))})))}},{key:"showRequests",value:function(){var e=this,t=this.state,n=t.isOwner,a=t.joinRequests;return n?r.a.createElement(y.a,null,a.map((function(t){return r.a.createElement(S.a,{key:t.username},r.a.createElement("div",null,r.a.createElement(j.a,null,t.username),r.a.createElement(j.a,null,t.bank),r.a.createElement(p.a,{variant:"contained",color:"primary",onClick:function(){e.handleRequest(t,!0)}},"Approve"),r.a.createElement(p.a,{variant:"contained",color:"secondary",onClick:function(){e.handleRequest(t,!1)}},"Reject")))}))):null}},{key:"showJoinButton",value:function(){var e=this,t=this.state,n=t.isJoined,a=t.isRequested;return n||a?!n&&a?r.a.createElement(p.a,{variant:"contained",onClick:function(){return e.joinGame()},disabled:!0},"Requested..."):null:r.a.createElement(p.a,{variant:"contained",onClick:function(){return e.joinGame()}},"Join Game")}},{key:"joinGame",value:function(){this.setState({showJoinDialog:!0})}},{key:"startGame",value:function(){var e=this.props.socket,t=this.props.match.params.id;e.emit("start",{room:t})}},{key:"showChatRoom",value:function(){var e=this.state,t=e.isJoined,n=e.username,a=this.props.match.params.id;if(t)return r.a.createElement(H,{username:n,room:a})}},{key:"render",value:function(){var e=this.state,t=e.showJoinDialog,n=e.startGame,a=e.joinedPlayers,o=e.username,s=e.bank,i=e.currState,u=this.props.socket,l=this.props.match.params.id;if(null==u)return r.a.createElement("h3",null,"Connecting...");var c=r.a.createElement("div",null,this.showStartButton(),this.showJoinButton(),this.showRequests(),r.a.createElement(w.a,null),this.showJoinedPlayers(),r.a.createElement(R,{open:t,room:l,onClose:this.handleClose})),m=n?r.a.createElement(_,{currState:i,room:l,players:a,username:o,bank:s}):c;return r.a.createElement("div",null,this.showChatRoom(),m)}}]),n}(a.Component),U=Object(u.b)(g)(x),I=n(93),T=n.n(I);var F=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={socket:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=T()({transports:["websocket"]});this.props.setSocket(e),this.setState({socket:e})}},{key:"render",value:function(){return this.state.socket?r.a.createElement(d.a,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/:id",render:function(e){return r.a.createElement(U,e)}}),r.a.createElement(f.b,{path:"/"},r.a.createElement(E,null)))):r.a.createElement("h3",null,"Connecting...")}}]),n}(a.Component),N=Object(u.b)(null,(function(e){return{setSocket:function(t){return e({type:"SET_SOCKET",payload:t})}}}))(F);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y={socket:void 0};var L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;return"SET_SOCKET"==t.type?Object.assign({},e,{socket:t.payload}):e},W=Object(i.b)(L);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:W},r.a.createElement(N,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[103,1,2]]]);
//# sourceMappingURL=main.01b80778.chunk.js.map